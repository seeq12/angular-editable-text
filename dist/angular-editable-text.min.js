!function(){"use strict";angular.module("gg.editableText",["puElasticInput"])}(),function(){"use strict";function a(a,b,c,d){function e(a,d,e){function f(){d.addClass("gg-editable-text"),i=d.find("input")[0],a.editingValue=a.editableText,a.$watch("isEditing",h),a.$watch("editableText",function(b){j=b,a.editingValue=b,g()})}function g(){a.isEditing&&e.hasOwnProperty("ggSelectAll")&&a.$applyAsync(function(){a.isEditing&&(i.focus(),i.setSelectionRange(0,a.editingValue.length))})}function h(c,f){d[c?"addClass":"removeClass"]("editing"),c?(i.focus(),g()):e.hasOwnProperty("ggOnChange")&&c!==f&&a.editingValue!==j?(a.isWorking=!0,b.when(a.onChange({value:a.editingValue})).then(function(b){"undefined"!=typeof b&&(a.editingText=a.editingValue=b)},function(){a.editingValue=a.editableText})["finally"](function(){a.isWorking=!1,g()})):(a.editableText=a.editingValue,g())}var i,j;f(),a.onInputFocus=function(){a.isEditing=!0},a.onInputBlur=function(){a.isEditing=!1,e.hasOwnProperty("ggOnBlur")&&a.onBlur()},a.onKeyPress=function(b){13===b.which?($(i).blur(),e.hasOwnProperty("ggKeepFocus")&&c(a.onInputFocus,20)):27===b.which&&(a.editingValue=a.editableText,$(i).blur())}}return{restrict:"EA",scope:{editableText:"=ggEditableText",isEditing:"=ggIsEditing",showEllipsis:"=ggShowEllipsis",placeholder:"@",autocomplete:"@",onChange:"&ggOnChange",onBlur:"&ggOnBlur"},transclude:!0,template:'<span ng-class="{\'is-placeholder\': placeholder && !editingValue}" ng-style="{\'max-width\': \'inherit\'}" ><input class="no-animate" ng-show="!showEllipsis || (isEditing && showEllipsis)" ng-focus="onInputFocus()" ng-blur="onInputBlur()" ng-keydown="onKeyPress($event)" ng-model="editingValue" ng-attr-autocomplete="{{autocomplete}}" ng-attr-placeholder="{{placeholder}}" type="text" pu-elastic-input pu-elastic-input-minwidth="inherit" pu-elastic-input-maxwidth="100%" /><div class="no-animate" ng-show="!isEditing && showEllipsis" ng-click="onInputFocus()">{{editingValue}}</div><span class="no-animate" ng-hide="isEditing" ng-transclude></span><span class="no-animate" ng-show="isWorking && EditableTextHelper.workingText.length" class="'+d.workingClassName+'">'+d.workingText+"</span></span>",link:e}}a.$inject=["$rootScope","$q","$timeout","EditableTextHelper"],angular.module("gg.editableText").directive("ggEditableText",a)}(),function(){"use strict";function a(){var a="",b="";this.setWorkingText=function(b){return a=b,this},this.setWorkingClassName=function(a){return b=a,this},this.$get=function(){return{workingText:a,workingClassName:b}}}angular.module("gg.editableText").provider("EditableTextHelper",a)}();